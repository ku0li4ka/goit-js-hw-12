{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport async function fetchImages(query, page = 1) {\n  try {\n    const response = await axios.get(`https://pixabay.com/api/?key=42977219-0f6c9f9217f976d8651793c3a&q=${query}&image_type=photo&per_page=15&page=${page}&orientation=horizontal&safesearch=true`);\n    \n    if (response.data.hits.length === 0) {\n      throw new Error('No images found');\n    }\n\n    return response.data.hits;\n  } catch (error) {\n    throw new Error(error.response.data.message || 'Failed to fetch images. Please try again later.');\n  }\n}\n\n\n\n// export function fetchImages(query) {                         \n//     return fetch(\n//       `https://pixabay.com/api/?key=42977219-0f6c9f9217f976d8651793c3a&q=${query}&image_type=photo&per_page=15&orientation=horizontal&safesearch=true`\n//       )\n//     .then(response => {\n//       if (!response.ok) {\n//         throw new Error(response.statusText);\n//       }\n//       return response.json();\n//     })\n//     .then(data => {\n//       if (data.hits.length === 0) {\n//         throw new Error ('No images found');\n//       }\n//       return data.hits;\n//     })\n//     .catch(error => {\n//       iziToast.error({\n//         title: 'Error',\n//         message: error.message || 'Failed to fetch images. Please try again later.',\n//         position: 'topCenter',\n//       });\n//       throw error;\n//     });\n//   }\n  ","import iziToast from 'izitoast';\nimport \"izitoast/dist/css/iziToast.min.css\";\n\n\nexport function renderImg(images, photoGallery, lightbox) {    \n  const markupImg = images                          \n    .map(image => {\n      return `<div class=\"blockForAllElements\">\n          <li>\n          <a href=${image.largeImageURL} download=\"false\">\n          <img src=${image.webformatURL} alt = \"${image.tags}\" class = \"imgOfUser\">\n          </a>\n          </li>\n          <div class = \"divForDescription\"> \n          <ul class=\"blockOfInfo\"> \n            <li class=\"title\">Likes</li>\n            <li class=\"info\">${image.likes}</li>\n          </ul>\n          <ul class=\"block\">\n            <li class=\"title\">Views</li>\n            <li class=\"info\">${image.views}</li>\n          </ul>\n          <ul class=\"block\">\n            <li class=\"title\">Comments</li>\n            <li class=\"info\">${image.comments}</li>\n          </ul>\n          <ul class=\"block\">\n            <li class=\"title\">Downloads</li>\n            <li class=\"info\">${image.downloads}</li>\n          </ul>\n          </div>\n        </div>`;\n    })\n    .join('');\n  photoGallery.insertAdjacentHTML('beforeend', markupImg);\n\n  lightbox.refresh();\n}\n\nexport function toggleLoader(loaderContainer) {                              \n  const spanElement = document.createElement('span');\n  loaderContainer.appendChild(spanElement);\n  spanElement.classList.add('loader');\n}\n\nexport function spanElementRem() {                       \n  const toggleLoader = document.querySelector('.loader');\n  toggleLoader.remove();\n}\n","import iziToast from 'izitoast';\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport axios from 'axios';\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport { fetchImages } from './js/pixabay-api.js';\nimport { renderImg, toggleLoader, spanElementRem } from './js/render-functions.js';\n\nconst searchInput = document.querySelector('.searchInput');\nconst searchButton = document.querySelector('.searchButton');\nconst searchForm = document.querySelector('.formForInput');\nconst photoGallery = document.querySelector('.photoGallery');\nconst loaderContainer = document.querySelector('.loaderContainer');\nconst loadMoreButton = document.querySelector('.loadMoreButton');\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionDelay: 250,\n  captionsData: 'alt',\n});\n\nlet currentPage = 1;\nlet currentQuery = '';\n\nsearchForm.addEventListener('submit', async event => {\n  event.preventDefault();\n  photoGallery.innerHTML = '';\n  toggleLoader(loaderContainer);\n  currentQuery = searchInput.value.trim();\n  currentPage = 1;\n  await fetchAndRenderImages(currentQuery, currentPage);\n});\n\nloadMoreButton.addEventListener('click', async () => {\n  toggleLoader(loaderContainer);\n  currentPage++;\n  await fetchAndRenderImages(currentQuery, currentPage);\n});\n\nasync function fetchAndRenderImages(query, page) {\n  try {\n    const images = await fetchImages(query, page);\n    renderImg(images, photoGallery, lightbox);\n    toggleLoader(loaderContainer);\n    if (images.length < 15) {\n      loadMoreButton.style.display = 'none';\n      iziToast.info({\n        title: 'Info',\n        message: `We're sorry, but you've reached the end of search results.`,\n        position: 'topCenter',\n      });\n    } else {\n      loadMoreButton.style.display = 'block';\n    }\n    smoothScroll();\n  } catch (error) {\n    console.error(error);\n    iziToast.error({\n      title: 'Error',\n      message: error.message,\n      position: 'topCenter',\n    });\n    toggleLoader(loaderContainer);\n  }\n}\n\nfunction smoothScroll() {\n  const cardHeight = document.querySelector('.blockForAllElements').offsetHeight;\n  window.scrollBy({\n    top: cardHeight * 2,\n    left: 0,\n    behavior: 'smooth'\n  });\n}\n\n\n\n\n// import iziToast from 'izitoast';\n// import \"izitoast/dist/css/iziToast.min.css\";\n\n\n// import SimpleLightbox from 'simplelightbox';\n// import 'simplelightbox/dist/simple-lightbox.min.css';\n\n// import { fetchImages } from './js/pixabay-api.js';\n// import { renderImg, toggleLoader, spanElementRem } from './js/render-functions.js';\n\n// const searchInput = document.querySelector('.searchInput');    \n// const searchButton = document.querySelector('.searchButton');\n// const searchForm = document.querySelector('.formForInput') \n// const photoGallery = document.querySelector('.photoGallery');\n// const loaderContainer = document.querySelector('.loaderContainer');\n\n// const lightbox = new SimpleLightbox('.gallery a', {   \n//   captionDelay: 250,\n//   captionsData: 'alt',\n// });\n\n// searchForm.addEventListener('submit', event => {   \n//   event.preventDefault();\n//   photoGallery.innerHTML = '';\n//   toggleLoader(loaderContainer);\n//   const query = searchInput.value.trim();\n//   if (!query) {\n//     iziToast.show({\n//       color: 'red',\n//       message: `Sorry, the input field must be filled in to start the photo search.`,\n//       position: 'topCenter',\n//     });\n//   } else {\n//     fetchImages(query)\n//       .then(images => {\n//         if (images.length === 0) {\n//           iziToast.show({\n//             color: 'red',\n//             message: `Sorry, there are no images matching your search query. Please try again!`,\n//             position: 'topCenter',\n//           });\n//         } else {\n//           renderImg(images, photoGallery, lightbox);\n//         }\n//       })\n//       .catch(error => {\n//         console.error(error);\n//       })\n//       .finally(() => spanElementRem());\n//   }\n// });\n"],"names":["fetchImages","query","page","response","axios","error","renderImg","images","photoGallery","lightbox","markupImg","image","toggleLoader","loaderContainer","spanElement","searchInput","searchForm","loadMoreButton","SimpleLightbox","currentPage","currentQuery","event","fetchAndRenderImages","iziToast","smoothScroll","cardHeight"],"mappings":"owBAEO,eAAeA,EAAYC,EAAOC,EAAO,EAAG,CACjD,GAAI,CACF,MAAMC,EAAW,MAAMC,EAAM,IAAI,qEAAqEH,CAAK,sCAAsCC,CAAI,yCAAyC,EAE9L,GAAIC,EAAS,KAAK,KAAK,SAAW,EAChC,MAAM,IAAI,MAAM,iBAAiB,EAGnC,OAAOA,EAAS,KAAK,IACtB,OAAQE,EAAO,CACd,MAAM,IAAI,MAAMA,EAAM,SAAS,KAAK,SAAW,iDAAiD,CACjG,CACH,CCVO,SAASC,EAAUC,EAAQC,EAAcC,EAAU,CACxD,MAAMC,EAAYH,EACf,IAAII,GACI;AAAA;AAAA,oBAEOA,EAAM,aAAa;AAAA,qBAClBA,EAAM,YAAY,WAAWA,EAAM,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,+BAM7BA,EAAM,KAAK;AAAA;AAAA;AAAA;AAAA,+BAIXA,EAAM,KAAK;AAAA;AAAA;AAAA;AAAA,+BAIXA,EAAM,QAAQ;AAAA;AAAA;AAAA;AAAA,+BAIdA,EAAM,SAAS;AAAA;AAAA;AAAA,eAIzC,EACA,KAAK,EAAE,EACVH,EAAa,mBAAmB,YAAaE,CAAS,EAEtDD,EAAS,QAAO,CAClB,CAEO,SAASG,EAAaC,EAAiB,CAC5C,MAAMC,EAAc,SAAS,cAAc,MAAM,EACjDD,EAAgB,YAAYC,CAAW,EACvCA,EAAY,UAAU,IAAI,QAAQ,CACpC,CCjCA,MAAMC,EAAc,SAAS,cAAc,cAAc,EACpC,SAAS,cAAc,eAAe,EAC3D,MAAMC,EAAa,SAAS,cAAc,eAAe,EACnDR,EAAe,SAAS,cAAc,eAAe,EACrDK,EAAkB,SAAS,cAAc,kBAAkB,EAC3DI,EAAiB,SAAS,cAAc,iBAAiB,EAEzDR,EAAW,IAAIS,EAAe,aAAc,CAChD,aAAc,IACd,aAAc,KAChB,CAAC,EAED,IAAIC,EAAc,EACdC,EAAe,GAEnBJ,EAAW,iBAAiB,SAAU,MAAMK,GAAS,CACnDA,EAAM,eAAc,EACpBb,EAAa,UAAY,GACzBI,EAAaC,CAAe,EAC5BO,EAAeL,EAAY,MAAM,OACjCI,EAAc,EACd,MAAMG,EAAqBF,EAAcD,CAAW,CACtD,CAAC,EAEDF,EAAe,iBAAiB,QAAS,SAAY,CACnDL,EAAaC,CAAe,EAC5BM,IACA,MAAMG,EAAqBF,EAAcD,CAAW,CACtD,CAAC,EAED,eAAeG,EAAqBrB,EAAOC,EAAM,CAC/C,GAAI,CACF,MAAMK,EAAS,MAAMP,EAAYC,EAAOC,CAAI,EAC5CI,EAAUC,EAAQC,EAAcC,CAAQ,EACxCG,EAAaC,CAAe,EACxBN,EAAO,OAAS,IAClBU,EAAe,MAAM,QAAU,OAC/BM,EAAS,KAAK,CACZ,MAAO,OACP,QAAS,6DACT,SAAU,WAClB,CAAO,GAEDN,EAAe,MAAM,QAAU,QAEjCO,GACD,OAAQnB,EAAO,CACd,QAAQ,MAAMA,CAAK,EACnBkB,EAAS,MAAM,CACb,MAAO,QACP,QAASlB,EAAM,QACf,SAAU,WAChB,CAAK,EACDO,EAAaC,CAAe,CAC7B,CACH,CAEA,SAASW,GAAe,CACtB,MAAMC,EAAa,SAAS,cAAc,sBAAsB,EAAE,aAClE,OAAO,SAAS,CACd,IAAKA,EAAa,EAClB,KAAM,EACN,SAAU,QACd,CAAG,CACH"}