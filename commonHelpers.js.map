{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport async function fetchImages(query, page = 1) {\n  try {\n    const response = await axios.get(`https://pixabay.com/api/?key=42977219-0f6c9f9217f976d8651793c3a&q=${query}&image_type=photo&per_page=15&page=${page}&orientation=horizontal&safesearch=true`);\n    \n    if (response.data.hits.length === 0) {\n      throw new Error('No images found');\n    }\n\n    return response.data.hits;\n  } catch (error) {\n    throw new Error(error.response.data.message || 'Failed to fetch images. Please try again later.');\n  }\n}\n\n","export function renderImg(images, photoGallery, lightbox) {    \n  const markupImg = images.map(image => {\n    return `<div class=\"blockForAllElements\">\n        <li>\n        <a href=\"${image.largeImageURL}\" download=\"false\">\n        <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" class=\"imgOfUser\">\n        </a>\n        </li>\n        <div class=\"divForDescription\"> \n        <ul class=\"blockOfInfo\"> \n          <li class=\"title\">Likes</li>\n          <li class=\"info\">${image.likes}</li>\n        </ul>\n        <ul class=\"block\">\n          <li class=\"title\">Views</li>\n          <li class=\"info\">${image.views}</li>\n        </ul>\n        <ul class=\"block\">\n          <li class=\"title\">Comments</li>\n          <li class=\"info\">${image.comments}</li>\n        </ul>\n        <ul class=\"block\">\n          <li class=\"title\">Downloads</li>\n          <li class=\"info\">${image.downloads}</li>\n        </ul>\n        </div>\n      </div>`;\n  }).join('');\n  photoGallery.insertAdjacentHTML('beforeend', markupImg);\n\n  lightbox.refresh();\n}\n\nexport function toggleLoader(container, show) {\n  if (show) {\n    const loader = document.createElement('div');\n    loader.classList.add('loader');\n    container.appendChild(loader);\n  } else {\n    const loader = container.querySelector('.loader');\n    if (loader) {\n      loader.remove();\n    }\n  }\n}\n\n\n\n\n\nexport function spanElementRem() {                       \n  const loader = document.querySelector('.loader');\n  if (loader) {\n    loader.remove();\n  }\n}\n\n","import iziToast from 'izitoast';\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport axios from 'axios';\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport { fetchImages } from './js/pixabay-api.js';\nimport { renderImg, toggleLoader, spanElementRem } from './js/render-functions.js';\n\nconst searchInput = document.querySelector('.searchInput');\nconst searchButton = document.querySelector('.searchButton');\nconst searchForm = document.querySelector('.formForInput');\nconst photoGallery = document.querySelector('.photoGallery');\nconst loaderContainer = document.querySelector('.loaderContainer');\nconst loadMoreButton = document.querySelector('.loadMoreButton');\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionDelay: 250,\n  captionsData: 'alt',\n});\n\nlet currentPage = 1;\nlet currentQuery = '';\n\nsearchForm.addEventListener('submit', async event => {\n  event.preventDefault();\n  photoGallery.innerHTML = '';\n  currentQuery = searchInput.value.trim();\n  currentPage = 1;\n  await fetchAndRenderImages(currentQuery, currentPage);\n});\n\nloadMoreButton.addEventListener('click', async () => {\n  toggleLoader(loaderContainer);\n  currentPage++;\n  await fetchAndRenderImages(currentQuery, currentPage);\n});\n\nasync function fetchAndRenderImages(query, page) {\n  try {\n    toggleLoader(loaderContainer, true); // показати лоадер перед початком пошуку\n\n    const images = await fetchImages(query, page);\n    renderImg(images, photoGallery, lightbox);\n\n    if (images.length < 15) {\n      loadMoreButton.style.display = 'none';\n      iziToast.info({\n        title: 'Info',\n        message: `We're sorry, but you've reached the end of search results.`,\n        position: 'topCenter',\n      });\n    } else {\n      loadMoreButton.style.display = 'block';\n    }\n\n    smoothScroll();\n  } catch (error) {\n    console.error(error);\n    let errorMessage = 'Failed to fetch images. Please try again later.';\n    if (error.response && error.response.status === 404) {\n      errorMessage = 'No data found for your query';\n    } else if (error.message === 'No images found') {\n      errorMessage = 'No results found for your query';\n    }\n    iziToast.error({\n      title: 'Error',\n      message: errorMessage,\n      position: 'topCenter',\n    });\n  } finally {\n    toggleLoader(loaderContainer, false); // приховати лоадер після завершення пошуку\n    spanElementRem();\n  }\n}\n\n\nfunction smoothScroll() {\n  document.addEventListener('DOMContentLoaded', function() {\n    const cardHeight = document.querySelector('.blockForAllElements').offsetHeight;\n    window.scrollBy({\n      top: cardHeight * 2,\n      left: 0,\n      behavior: 'smooth'\n    });\n  });\n}\n\n"],"names":["fetchImages","query","page","response","axios","error","renderImg","images","photoGallery","lightbox","markupImg","image","toggleLoader","container","show","loader","spanElementRem","searchInput","searchForm","loaderContainer","loadMoreButton","SimpleLightbox","currentPage","currentQuery","event","fetchAndRenderImages","iziToast","smoothScroll","errorMessage","cardHeight"],"mappings":"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"}