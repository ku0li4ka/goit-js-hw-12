{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport async function fetchImages(query, page = 1) {\n  try {\n    const response = await axios.get(`https://pixabay.com/api/?key=42977219-0f6c9f9217f976d8651793c3a&q=${query}&image_type=photo&per_page=15&page=${page}&orientation=horizontal&safesearch=true`);\n    \n    if (response.data.hits.length === 0) {\n      throw new Error('No images found');\n    }\n\n    return response.data.hits;\n  } catch (error) {\n    throw new Error(error.response.data.message || 'Failed to fetch images. Please try again later.');\n  }\n}\n","export function renderImg(images, photoGallery, lightbox) {    \n  const markupImg = images                          \n    .map(image => {\n      return `<div class=\"blockForAllElements\">\n          <li>\n          <a href=${image.largeImageURL} download=\"false\">\n          <img src=${image.webformatURL} alt = \"${image.tags}\" class = \"imgOfUser\">\n          </a>\n          </li>\n          <div class = \"divForDescription\"> \n          <ul class=\"blockOfInfo\"> \n            <li class=\"title\">Likes</li>\n            <li class=\"info\">${image.likes}</li>\n          </ul>\n          <ul class=\"block\">\n            <li class=\"title\">Views</li>\n            <li class=\"info\">${image.views}</li>\n          </ul>\n          <ul class=\"block\">\n            <li class=\"title\">Comments</li>\n            <li class=\"info\">${image.comments}</li>\n          </ul>\n          <ul class=\"block\">\n            <li class=\"title\">Downloads</li>\n            <li class=\"info\">${image.downloads}</li>\n          </ul>\n          </div>\n        </div>`;\n    })\n    .join('');\n  photoGallery.insertAdjacentHTML('beforeend', markupImg);\n\n  lightbox.refresh();\n}\n\nexport function toggleLoader(loaderContainer) {\n  const loader = loaderContainer.querySelector('.loader');\n  if (loader) {\n    loader.classList.toggle('hidden'); \n    const spanElement = document.createElement('span');\n    spanElement.classList.add('loader');\n    loaderContainer.appendChild(spanElement);\n  }\n}\n\nexport function spanElementRem() {                       \n  const loader = document.querySelector('.loader');\n  if (loader) {\n    loader.remove();\n  }\n}\n\n","import iziToast from 'izitoast';\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport axios from 'axios';\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport { fetchImages } from './js/pixabay-api.js';\nimport { renderImg, toggleLoader, spanElementRem } from './js/render-functions.js';\n\nconst searchInput = document.querySelector('.searchInput');\nconst searchButton = document.querySelector('.searchButton');\nconst searchForm = document.querySelector('.formForInput');\nconst photoGallery = document.querySelector('.photoGallery');\nconst loaderContainer = document.querySelector('.loaderContainer');\nconst loadMoreButton = document.querySelector('.loadMoreButton');\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionDelay: 250,\n  captionsData: 'alt',\n});\n\nlet currentPage = 1;\nlet currentQuery = '';\n\nsearchForm.addEventListener('submit', async event => {\n  event.preventDefault();\n  photoGallery.innerHTML = '';\n  toggleLoader(loaderContainer);\n  currentQuery = searchInput.value.trim();\n  currentPage = 1;\n  await fetchAndRenderImages(currentQuery, currentPage);\n});\n\nloadMoreButton.addEventListener('click', async () => {\n  toggleLoader(loaderContainer);\n  currentPage++;\n  await fetchAndRenderImages(currentQuery, currentPage);\n});\n\nasync function fetchAndRenderImages(query, page) {\n  try {\n    toggleLoader(loaderContainer);\n    const images = await fetchImages(query, page);\n    renderImg(images, photoGallery, lightbox);\n    if (images.length < 15) {\n      loadMoreButton.style.display = 'none';\n      iziToast.info({\n        title: 'Info',\n        message: `We're sorry, but you've reached the end of search results.`,\n        position: 'topCenter',\n      });\n    } else {\n      loadMoreButton.style.display = 'block';\n    }\n    smoothScroll();\n  } catch (error) {\n    console.error(error);\n    iziToast.error({\n      title: 'Error',\n      message: error.message,\n      position: 'topCenter',\n    });\n  } finally {\n    toggleLoader(loaderContainer);\n    spanElementRem(); \n  }\n}\n\nfunction smoothScroll() {\n  const cardHeight = document.querySelector('.blockForAllElements').offsetHeight;\n  window.scrollBy({\n    top: cardHeight * 2,\n    left: 0,\n    behavior: 'smooth'\n  });\n}\n\n\n"],"names":["fetchImages","query","page","response","axios","error","renderImg","images","photoGallery","lightbox","markupImg","image","toggleLoader","loaderContainer","loader","spanElement","spanElementRem","searchInput","searchForm","loadMoreButton","SimpleLightbox","currentPage","currentQuery","event","fetchAndRenderImages","iziToast","smoothScroll","cardHeight"],"mappings":"owBAEO,eAAeA,EAAYC,EAAOC,EAAO,EAAG,CACjD,GAAI,CACF,MAAMC,EAAW,MAAMC,EAAM,IAAI,qEAAqEH,CAAK,sCAAsCC,CAAI,yCAAyC,EAE9L,GAAIC,EAAS,KAAK,KAAK,SAAW,EAChC,MAAM,IAAI,MAAM,iBAAiB,EAGnC,OAAOA,EAAS,KAAK,IACtB,OAAQE,EAAO,CACd,MAAM,IAAI,MAAMA,EAAM,SAAS,KAAK,SAAW,iDAAiD,CACjG,CACH,CCdO,SAASC,EAAUC,EAAQC,EAAcC,EAAU,CACxD,MAAMC,EAAYH,EACf,IAAII,GACI;AAAA;AAAA,oBAEOA,EAAM,aAAa;AAAA,qBAClBA,EAAM,YAAY,WAAWA,EAAM,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,+BAM7BA,EAAM,KAAK;AAAA;AAAA;AAAA;AAAA,+BAIXA,EAAM,KAAK;AAAA;AAAA;AAAA;AAAA,+BAIXA,EAAM,QAAQ;AAAA;AAAA;AAAA;AAAA,+BAIdA,EAAM,SAAS;AAAA;AAAA;AAAA,eAIzC,EACA,KAAK,EAAE,EACVH,EAAa,mBAAmB,YAAaE,CAAS,EAEtDD,EAAS,QAAO,CAClB,CAEO,SAASG,EAAaC,EAAiB,CAC5C,MAAMC,EAASD,EAAgB,cAAc,SAAS,EACtD,GAAIC,EAAQ,CACVA,EAAO,UAAU,OAAO,QAAQ,EAChC,MAAMC,EAAc,SAAS,cAAc,MAAM,EACjDA,EAAY,UAAU,IAAI,QAAQ,EAClCF,EAAgB,YAAYE,CAAW,CACxC,CACH,CAEO,SAASC,GAAiB,CAC/B,MAAMF,EAAS,SAAS,cAAc,SAAS,EAC3CA,GACFA,EAAO,OAAM,CAEjB,CCxCA,MAAMG,EAAc,SAAS,cAAc,cAAc,EACpC,SAAS,cAAc,eAAe,EAC3D,MAAMC,EAAa,SAAS,cAAc,eAAe,EACnDV,EAAe,SAAS,cAAc,eAAe,EACrDK,EAAkB,SAAS,cAAc,kBAAkB,EAC3DM,EAAiB,SAAS,cAAc,iBAAiB,EAEzDV,EAAW,IAAIW,EAAe,aAAc,CAChD,aAAc,IACd,aAAc,KAChB,CAAC,EAED,IAAIC,EAAc,EACdC,EAAe,GAEnBJ,EAAW,iBAAiB,SAAU,MAAMK,GAAS,CACnDA,EAAM,eAAc,EACpBf,EAAa,UAAY,GACzBI,EAAaC,CAAe,EAC5BS,EAAeL,EAAY,MAAM,OACjCI,EAAc,EACd,MAAMG,EAAqBF,EAAcD,CAAW,CACtD,CAAC,EAEDF,EAAe,iBAAiB,QAAS,SAAY,CACnDP,EAAaC,CAAe,EAC5BQ,IACA,MAAMG,EAAqBF,EAAcD,CAAW,CACtD,CAAC,EAED,eAAeG,EAAqBvB,EAAOC,EAAM,CAC/C,GAAI,CACFU,EAAaC,CAAe,EAC5B,MAAMN,EAAS,MAAMP,EAAYC,EAAOC,CAAI,EAC5CI,EAAUC,EAAQC,EAAcC,CAAQ,EACpCF,EAAO,OAAS,IAClBY,EAAe,MAAM,QAAU,OAC/BM,EAAS,KAAK,CACZ,MAAO,OACP,QAAS,6DACT,SAAU,WAClB,CAAO,GAEDN,EAAe,MAAM,QAAU,QAEjCO,GACD,OAAQrB,EAAO,CACd,QAAQ,MAAMA,CAAK,EACnBoB,EAAS,MAAM,CACb,MAAO,QACP,QAASpB,EAAM,QACf,SAAU,WAChB,CAAK,CACL,QAAY,CACRO,EAAaC,CAAe,EAC5BG,GACD,CACH,CAEA,SAASU,GAAe,CACtB,MAAMC,EAAa,SAAS,cAAc,sBAAsB,EAAE,aAClE,OAAO,SAAS,CACd,IAAKA,EAAa,EAClB,KAAM,EACN,SAAU,QACd,CAAG,CACH"}